<div class="tablewrapper">
	<h1 class="title">Lista de todos los trabajadores</h1>
	<table aria-label="Listado de todos los trabajadores existentes" class="table table-hover">
		<thead>
			<tr>
				<th scope="col">DNI</th>
				<th scope="col">NOMBRE</th>
				<th scope="col">APELLIDOS</th>
				<th scope="col">ÁREA</th>
				<th scope="col">UNIDAD</th>
				<th scope="col">DEPARTAMENTO</th>
				<th scope="col">CAT. COMPETENCIAL</th>
				<th scope="col">CAT. CONTRACTUAL</th>
				<th scope="col" style="max-width: 1rem">
					<button class="btn btn-primary" (click)="newEmptyWorker()">
						<span class="material-icons" title="Añadir trabajador"> add </span>
					</button>
				</th>
			</tr>
		</thead>

		<tbody>
			<tr *ngFor="let trab of listaTrabaToAdd">
				<td>
					<input type="text" class="form-control" [(ngModel)]="trab.dni" />
				</td>
				<td>
					<input type="text" class="form-control" [(ngModel)]="trab.nombre" />
				</td>
				<td>
					<input type="text" class="form-control" [(ngModel)]="trab.apellidos" />
				</td>
				<td>
					<input type="text" class="form-control" [(ngModel)]="trab.area" />
				</td>
				<td>
					<input type="text" class="form-control" [(ngModel)]="trab.unidad" />
				</td>
				<td>
					<input type="text" class="form-control" [(ngModel)]="trab.departamento" />
				</td>
				<td>
					<select id="catCompetencial" [(ngModel)]="trab.catComp">
						<option *ngFor="let catComp of catComps" [value]="catComp.id">{{ catComp.id }}</option>
					</select>
				</td>
				<td>
					<select id="catContractual" [(ngModel)]="trab.catContr">
						<option *ngFor="let catContrac of catContracts" [value]="catContrac.id">
							{{ catContrac.id }}
						</option>
					</select>
				</td>

				<td>
					<div class="btn btn-danger" (click)="deleteWorkerToAdd(trab)">
						<span class="material-icons"> delete </span>
					</div>
					<div
						class="btn btn-success"
						(click)="persistWorker(trab)"
						*ngIf="trab.dni !== '' && trab.nombre !== '' && trab.apellidos !== ''"
					>
						<span class="material-icons"> add </span>
					</div>
				</td>
			</tr>

			<tr *ngFor="let trab of trabajadores">
				<td *ngIf="!trab.editing">{{ trab.dni }}</td>
				<td *ngIf="trab.editing">
					<input type="text" class="form-control" [(ngModel)]="trab.dni" />
				</td>

				<td *ngIf="!trab.editing">{{ trab.nombre }}</td>
				<td *ngIf="trab.editing">
					<input type="text" class="form-control" [(ngModel)]="trab.nombre" />
				</td>

				<td *ngIf="!trab.editing">{{ trab.apellidos }}</td>
				<td *ngIf="trab.editing">
					<input type="text" class="form-control" [(ngModel)]="trab.apellidos" />
				</td>

				<td *ngIf="!trab.editing">{{ trab.area }}</td>
				<td *ngIf="trab.editing">
					<input type="text" class="form-control" [(ngModel)]="trab.area" />
				</td>

				<td *ngIf="!trab.editing">{{ trab.unidad }}</td>
				<td *ngIf="trab.editing">
					<input type="text" class="form-control" [(ngModel)]="trab.unidad" />
				</td>

				<td *ngIf="!trab.editing">{{ trab.departamento }}</td>
				<td *ngIf="trab.editing">
					<input type="text" class="form-control" [(ngModel)]="trab.departamento" />
				</td>

				<td *ngIf="!trab.editing">{{ trab.catComp }}</td>
				<td *ngIf="trab.editing">
					<select [(ngModel)]="trab.catComp">
						<option *ngFor="let catComp of catComps" [value]="catComp.id">{{ catComp.id }}</option>
					</select>
				</td>

				<td *ngIf="!trab.editing">{{ trab.catContr }}</td>
				<td *ngIf="trab.editing">
					<select [(ngModel)]="trab.catContr">
						<option *ngFor="let catContrac of catContracts" [value]="catContrac.id">
							{{ catContrac.id }}
						</option>
					</select>
				</td>

				<td>
					<div class="btn btn-success" (click)="editingWorker(trab, true, false)">
						<span class="material-icons"> edit </span>
					</div>
					<div class="btn btn-primary" *ngIf="trab.editing" (click)="editingWorker(trab, false, true)">
						<span class="material-icons"> done </span>
					</div>
				</td>
			</tr>
		</tbody>
	</table>
</div>
